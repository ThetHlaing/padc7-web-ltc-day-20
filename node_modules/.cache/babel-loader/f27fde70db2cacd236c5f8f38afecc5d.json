{"ast":null,"code":"import _classCallCheck from \"/media/thet/Data/PADC/PADC 7/Repos/Day 20 - Firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/thet/Data/PADC/PADC 7/Repos/Day 20 - Firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/thet/Data/PADC/PADC 7/Repos/Day 20 - Firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/thet/Data/PADC/PADC 7/Repos/Day 20 - Firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/thet/Data/PADC/PADC 7/Repos/Day 20 - Firebase/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/thet/Data/PADC/PADC 7/Repos/Day 20 - Firebase/src/components/LoginForm/LoginForm.js\";\nimport React from \"react\";\nimport { render } from \"react-dom\";\nimport { BrowserRouter as Router, Redirect, Route, Link } from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport { loginUserEvent, fetchUsers } from '../../actions/userActions';\n\nvar LoginForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LoginForm, _React$Component);\n\n  function LoginForm(props) {\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginForm).call(this, props));\n    _this.state = {\n      redirectToReferrer: false\n    };\n\n    _this.handleOnSubmit = function (event) {\n      event.preventDefault();\n      var name = _this.name.current.value;\n      var password = _this.password.current.value;\n\n      var currentUser = _this.props.users.find(function (user) {\n        return user.name === name && user.password === password;\n      });\n\n      console.log(\"Users\", _this.props.users);\n\n      if (currentUser) {\n        _this.props.loginUserEvent(currentUser, function () {\n          _this.setState({\n            redirectToReferrer: true\n          });\n        });\n      } else {\n        alert(\"Wrong password\");\n      }\n    };\n\n    _this.name = React.createRef();\n    _this.password = React.createRef();\n\n    _this.props.fetchUsers();\n\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"render\",\n    value: function render() {\n      var _ref = this.props.location.state || {\n        from: {\n          pathname: \"/\"\n        }\n      },\n          from = _ref.from;\n\n      var redirectToReferrer = this.state.redirectToReferrer;\n      if (redirectToReferrer) return React.createElement(Redirect, {\n        to: from,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      });\n      return React.createElement(\"form\", {\n        onSubmit: this.handleOnSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"user_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"User Name : \"), React.createElement(\"input\", {\n        id: \"user_name\",\n        required: true,\n        ref: this.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"input\", {\n        type: \"password\",\n        required: true,\n        id: \"password\",\n        ref: this.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Login\"), React.createElement(Link, {\n        to: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"Register\"));\n    }\n  }]);\n\n  return LoginForm;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    users: state.users\n  };\n};\n\nvar mapDispatchToProps = {\n  loginUserEvent: loginUserEvent,\n  fetchUsers: fetchUsers\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);","map":{"version":3,"sources":["/media/thet/Data/PADC/PADC 7/Repos/Day 20 - Firebase/src/components/LoginForm/LoginForm.js"],"names":["React","render","BrowserRouter","Router","Redirect","Route","Link","connect","loginUserEvent","fetchUsers","LoginForm","props","state","redirectToReferrer","handleOnSubmit","event","preventDefault","name","current","value","password","currentUser","users","find","user","console","log","setState","alert","createRef","location","from","pathname","Component","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { render } from \"react-dom\";\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport { loginUserEvent,fetchUsers } from '../../actions/userActions';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.name = React.createRef();\n    this.password = React.createRef();\n    this.props.fetchUsers();\n  }\n\n  state = { redirectToReferrer: false };\n\n  handleOnSubmit = event => {\n    event.preventDefault();\n\n    const name = this.name.current.value;\n    const password = this.password.current.value;\n\n    const currentUser = this.props.users.find( user => user.name === name && user.password === password )\n    console.log(\"Users\",this.props.users);\n    \n    if(currentUser){\n      this.props.loginUserEvent(\n        currentUser,\n        () => {\n          this.setState({ redirectToReferrer: true });\n        }\n      );\n    }\n    else{\n      alert(\"Wrong password\");\n    }\n   \n  };\n\n  render() {\n    let { from } = this.props.location.state || { from: { pathname: \"/\" } };\n    let { redirectToReferrer } = this.state;\n\n    if (redirectToReferrer) return <Redirect to={from} />;\n\n    return (\n      <form onSubmit={this.handleOnSubmit}>\n        <label htmlFor=\"user_name\">User Name : </label>\n        <input id=\"user_name\" required ref={this.name} />\n        <br />\n        <label htmlFor=\"password\">Password</label>\n        <input type=\"password\" required id=\"password\" ref={this.password} />\n        <br />\n        <button type=\"submit\">Login</button>\n        <Link to=\"/register\">Register</Link>\n      </form>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  users : state.users  \n});\n\nconst mapDispatchToProps = {\n  loginUserEvent,\n  fetchUsers\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(LoginForm)"]},"metadata":{},"sourceType":"module"}